<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>REAC 2025: Indiana Jones and The Great Circle - 60Hzへの挑戦（詳細版）</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Kalam:wght@700&display=swap');
body{font-family:'Noto Sans JP',sans-serif;background-color:#f8fafc;color:#334155;margin:0;padding:1.5rem;line-height:1.5;}
main{max-width:1200px;margin:auto;}
h1,h2,h3{font-family:'Kalam',cursive;margin:0;}
header{margin-bottom:2rem;}
.title-bar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;border-bottom:3px solid #e2e8f0;padding-bottom:1rem;margin-bottom:2rem;}
.title-bar h1{font-size:32px;color:#1e293b;margin:0;}
.title-bar .meta{text-align:right;}
.meta span{font-size:16px;color:#475569;display:block;}
.meta p{font-size:14px;color:#64748b;margin:0;}
.container{display:flex;flex-wrap:wrap;gap:2rem;width:100%;}
.column{flex:1;min-width:320px;display:flex;flex-direction:column;gap:1.5rem;}
.card{background:rgba(255,255,255,0.7);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);box-shadow:0 4px 12px rgba(0,0,0,0.08);border-radius:12px;padding:1.5rem;height:fit-content;}
.card h3{font-size:18px;color:#1e40af;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;}
.card p,.card li{font-size:14px;color:#334155;}
.card ul{padding-left:1.5rem;margin:0;}
.card strong{color:#c026d3;}
.highlight{background:linear-gradient(180deg,transparent 65%,#facc15 65%);padding:0 0.2em;font-weight:bold;}
.handwritten-border{border:2px solid #475569;border-radius:15px 245px 15px 25px / 25px 15px 225px 15px;padding:1.2rem;text-align:center;}
.banner{background-color:#1e40af;color:white;padding:1rem;text-align:center;font-size:20px;font-weight:bold;border-radius:8px 120px 8px 110px / 110px 8px 120px 8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);margin-bottom:1rem;}
.flow-diagram{display:flex;flex-direction:column;gap:0.5rem;}
.flow-item{background-color:#eef2ff;padding:0.8rem 1rem;border-left:4px solid #4f46e5;border-radius:4px;position:relative;}
.flow-item.async{border-left-style:dashed;border-color:#fb923c;}
.flow-item.heavy{border-left-color:#dc2626;background-color:#fee2e2;}
.flow-arrow{text-align:center;color:#9ca3af;font-size:24px;margin:0.2rem 0;}
.keyword-tag{display:inline-block;background-color:#e0e7ff;color:#3730a3;padding:0.2em 0.6em;border-radius:999px;font-size:12px;font-weight:bold;margin-right:0.5em;margin-bottom:0.5em;}
.teamwork-card{background-color:#dcfce7;border:2px dashed #16a34a;text-align:center;}
.teamwork-card h3{color:#15803d;}
</style>
</head>
<body>
<main>
<div class="title-bar">
<h1>REAC 2025: Indiana Jones & The Great Circle - <span class="highlight">60Hzへの挑戦</span> (詳細版)</h1>
<div class="meta">
<span>発表: ジョー・デバル氏 (Machine Games)</span>
<p>出典: REAC 2025 プレゼンテーション</p>
</div>
</div>
<div class="container">
<div class="column">
<div class="card handwritten-border">
<h3>🎯 最重要原則</h3>
<div class="banner">「全プラットフォームで60Hz。<br>これは妥協できない」</div>
<p>この固定要件のため、<span class="highlight">スループットを優先しレイテンシを犠牲</span>にする戦略を採用。多くの処理を複数フレームに分散させ、負荷を平準化しました。</p>
</div>
<div class="card">
<h3>✏️ ゲーム概要</h3>
<ul>
<li><strong>タイトル:</strong> インディ・ジョーンズと大いなる円</li>
<li><strong>プラットフォーム:</strong> PC, Xbox, PS5</li>
<li><strong>発売:</strong> PC/Xbox (2024年後半), PS5 (2025年春)</li>
<li><strong>エンジン:</strong> id Tech 7 のフォーク「<strong>Mエンジン</strong>」</li>
<li><strong>開発スタジオ:</strong> Machine Games (スウェーデン)</li>
</ul>
</div>
<div class="card">
<h3>🥵 負荷の高いシーンの例</h3>
<ul>
<li><strong>スコタイのツリーハウス:</strong> 多数の木々があり、効果的な遮蔽物が少ない高所シーン。</li>
<li><strong>ネパールの洞窟:</strong> 氷やパーティクルなど多数の透明オブジェクトと重い岩シェーダーが原因。最適化前は<strong>30Hz以下</strong>に低下。</li>
<li><strong>カットシーン:</strong> 全てが動的で、多数の専用ライトが設定されるため全体的に高負荷。</li>
</ul>
</div>
<div class="card teamwork-card">
<h3>🤝 共同作業の文化</h3>
<p>パフォーマンス向上は特定部門の責任ではなく、アートとエンジニアリングの<span class="highlight">「共同作業」</span>でした。全員が60Hzという共通目標に向かって協力し、ボトルネックを特定・改善する文化が「恩恵」であったと語られました。</p>
</div>
</div>
<div class="column">
<div class="card">
<h3>📊 フレームの構成 (GPUパイプライン)</h3>
<p>1フレームを描画するための主要な処理フローです。</p>
<div class="flow-diagram">
<div class="flow-item"><strong>フレーム開始</strong><br>セットアップ、エコトープ(植生配置)</div>
<div class="flow-arrow">↓</div>
<div class="flow-item"><strong>オクルージョンバッファ生成</strong></div>
<div class="flow-arrow">↓</div>
<div class="flow-item"><strong>メインビューカリング</strong><br>GPUトライアングルカリングで処理ジオメトリを大幅削減</div>
<div class="flow-arrow">↓</div>
<div class="flow-item async"><strong>シャドウレンダリング (非同期)</strong><br>静的キャッシュを多用し、<strong>最大30フレーム</strong>に作業を分散</div>
<div class="flow-arrow">↓</div>
<div class="flow-item"><strong>フルデプスバッファレンダリング</strong></div>
<div class="flow-arrow">↓</div>
<div class="flow-item async"><strong>GIプローブトレース (非同期)</strong></div>
<div class="flow-arrow">↓</div>
<div class="flow-item heavy"><strong>不透明オブジェクト描画 (🔥最重パス)</strong><br>フルフォワードプラスライティングで描画</div>
<div class="flow-arrow">↓</div>
<div class="flow-item"><strong>GIファイナルギャザー & ノイズ除去</strong></div>
<div class="flow-arrow">↓</div>
<div class="flow-item"><strong>透過オブジェクトのブレンド</strong></div>
<div class="flow-arrow">↓</div>
<div class="flow-item async"><strong>ポストプロセス (非同期)</strong><br>次フレームとオーバーラップ実行 (<strong>数msのゲイン</strong>)</div>
</div>
</div>
</div>
<div class="column">
<div class="card">
<h3>🛠️ パフォーマンス最適化事例 (数値情報付き)</h3>
<p>2024年8月時点では多くのレベルで60Hz達成に苦戦していましたが、以下の最適化で目標を達成しました。</p>
<ul>
<li><strong>可変レートシェーディング (VRS):</strong>
<br>ハードウェア対応機種(PS5 Pro等)で使用。ネパールのシーンで<strong>最大3.5ms</strong>、ブレンドパスだけでも<strong>1.5ms</strong>の大幅なゲイン。</li>
<li><strong>解像度スケーリング & ANISO連携:</strong>
<br>負荷に応じて解像度を<strong>最低44%</strong>まで動的に変更。同時に異方性フィルタリングも<strong>8x/4x/2x</strong>と切り替えパフォーマンスを確保。</li>
<li><strong>ドローコンパクション & プレディケーション:</strong>
<br>描画されないドローコールをGPU側でスキップ。これにより<strong>約0.5ms</strong>のブースト。</li>
<li><strong>植生モデルの最適化:</strong>
<br>プロジェクト終盤に<strong>約500</strong>もの植生モデルを単純化・ポリゴン削減。</li>
<li><strong>シャドウカスケードの最適化:</strong>
<br><strong>4段階</strong>のカスケードを使用。遠景カスケードの更新を<strong>3フレームに1回</strong>にし、静的キャッシュ更新は<strong>最大30フレーム</strong>に分散させて負荷を平準化。</li>
<li><strong>雪の変形処理の最適化:</strong>
<br>ダウンサンプリング処理にWave演算などを活用し、Series Sで<strong>平均約1ms</strong>を削減。</li>
<li><strong>コンパイラ回避策:</strong>
<br>除算命令を手動でビットシフトに置き換え、シェーダーから<strong>60以上の命令</strong>を削減。</li>
<li><strong>レイトレーシングのホットスポット修正:</strong>
<br>バスモデルのバウンディングボックスを修正し、<strong>約0.5ms</strong>を削減。</li>
</ul>
</div>
<div class="card">
<h3>📝 技術TIPS & Q&A</h3>
<ul>
<li><strong>メッシュシェーダー/OIT:</strong> 未使用。トライアングルカリングとCPU駆動の透過処理で対応。</li>
<li><strong>フォワード+ vs ディファード:</strong> 多数のカスタムライティングに対応するため、実績のあるフォワード+を継続。ただし、後続パス用に<strong>4つのレンダーターゲットを持つミニGBuffer</strong>は出力。</li>
<li><strong>VRS非対応機種:</strong> PS5のベースモデルなどVRS非対応機では、この最適化は適用されない。</li>
<li><strong>VGPR圧力低減:</strong> レジスタ使用量を<strong>60 VGPR</strong>以下に抑えることで占有率を上げ、パフォーマンスを向上させるチューニングを実施。</li>
</ul>
</div>
</div>
</div>
</main>
</body>
</html>
